# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ 0412-1-2023-–≠–û–ú

## ‚úÖ –ì–õ–ê–í–ù–û–ï –û–¢–ö–†–´–¢–ò–ï: Garbage Detection –†–ê–ë–û–¢–ê–ï–¢!

### –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:

1. **Garbage detection —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–∞—Ä—É–∂–∏–ª –º—É—Å–æ—Ä** –Ω–∞ –≤—Å–µ—Ö 21 —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞
2. **OCR –ø–æ–ø—ã—Ç–∞–ª—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è** –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
3. **OCR —É–ø–∞–ª —Å –æ—à–∏–±–∫–æ–π**: `Unable to get page count. Is poppler installed and in PATH?`
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –î–æ–∫—É–º–µ–Ω—Ç –Ω–µ –±—ã–ª –æ–±—Ä–∞–±–æ—Ç–∞–Ω, —á–∞–Ω–∫–∏ –Ω–µ —Å–æ–∑–¥–∞–Ω—ã

### –õ–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:

```
2025-11-27 13:44:47,196 - src.services.document_parser - WARNING - –û–±–Ω–∞—Ä—É–∂–µ–Ω –º—É—Å–æ—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç –Ω–∞ —Å—Ç—Ä. 1. –ü—Ä–∏–º–µ–Ω—è–µ–º –ø–æ–ª–Ω—ã–π OCR —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
2025-11-27 13:44:47,244 - src.services.document_parser - ERROR - –û—à–∏–±–∫–∞ –ø–æ–ª–Ω–æ–≥–æ OCR —Å—Ç—Ä–∞–Ω–∏—Ü—ã 1: Unable to get page count. Is poppler installed and in PATH?

2025-11-27 13:44:47,257 - src.services.document_parser - WARNING - –û–±–Ω–∞—Ä—É–∂–µ–Ω –º—É—Å–æ—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç –Ω–∞ —Å—Ç—Ä. 2. –ü—Ä–∏–º–µ–Ω—è–µ–º –ø–æ–ª–Ω—ã–π OCR —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
2025-11-27 13:44:47,299 - src.services.document_parser - ERROR - –û—à–∏–±–∫–∞ –ø–æ–ª–Ω–æ–≥–æ OCR —Å—Ç—Ä–∞–Ω–∏—Ü—ã 2: Unable to get page count. Is poppler installed and in PATH?

... (–ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü 3-21)

2025-11-27 13:44:47,994 - src.services.document_processor_service - WARNING - No content extracted from 0412-1-2023-–≠–û–ú -–≠–ª–µ–∫—Ç—Ä–æ—Å–Ω–∞–±–∂–µ–Ω–∏–µ,—ç–ª–µ–∫—Ç—Ä–æ–æ—Å–≤–µ—â–µ–Ω–∏–µ –∏ —Å–∏–ª–æ–≤–æ–µ —ç–ª–µ–∫—Ç—Ä–æ–æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ.pdf
2025-11-27 13:44:47,995 - __main__ - WARNING - ‚ùå Could not create chunks for document: 0412-1-2023-–≠–û–ú -–≠–ª–µ–∫—Ç—Ä–æ—Å–Ω–∞–±–∂–µ–Ω–∏–µ,—ç–ª–µ–∫—Ç—Ä–æ–æ—Å–≤–µ—â–µ–Ω–∏–µ –∏ —Å–∏–ª–æ–≤–æ–µ —ç–ª–µ–∫—Ç—Ä–æ–æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ.pdf
```

---

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### –ü–æ—á–µ–º—É –≤ Docker –±—ã–ª–∏ –º—É—Å–æ—Ä–Ω—ã–µ —á–∞–Ω–∫–∏?

**–û—Ç–≤–µ—Ç**: –í Docker `poppler-utils` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –ø–æ—ç—Ç–æ–º—É:
1. Garbage detection –æ–±–Ω–∞—Ä—É–∂–∏–ª –º—É—Å–æ—Ä ‚úÖ
2. OCR –∑–∞–ø—É—Å—Ç–∏–ª—Å—è ‚úÖ
3. **–ù–û**: OCR –Ω–µ —Å–º–æ–≥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å —Ç–µ–∫—Å—Ç (AutoCAD —á–µ—Ä—Ç–µ–∂–∏)
4. –†–µ–∑—É–ª—å—Ç–∞—Ç: –ú—É—Å–æ—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç –æ—Å—Ç–∞–ª—Å—è, –Ω–æ –±—ã–ª –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω

### –ü–æ—á–µ–º—É –ª–æ–∫–∞–ª—å–Ω–æ –Ω–µ—Ç —á–∞–Ω–∫–æ–≤?

**–û—Ç–≤–µ—Ç**: –õ–æ–∫–∞–ª—å–Ω–æ `poppler-utils` –ù–ï —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –ø–æ—ç—Ç–æ–º—É:
1. Garbage detection –æ–±–Ω–∞—Ä—É–∂–∏–ª –º—É—Å–æ—Ä ‚úÖ
2. OCR –ø–æ–ø—ã—Ç–∞–ª—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è ‚úÖ
3. **–ù–û**: OCR —É–ø–∞–ª —Å –æ—à–∏–±–∫–æ–π (–Ω–µ—Ç poppler)
4. –†–µ–∑—É–ª—å—Ç–∞—Ç: –î–æ–∫—É–º–µ–Ω—Ç –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω –≤–æ–æ–±—â–µ

---

## üìä –í—ã–≤–æ–¥—ã

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

1. **Garbage detection** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º—É—Å–æ—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç
2. **–õ–æ–≥–∏–∫–∞ –≤—ã–∑–æ–≤–∞ OCR** - –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–∏–º–µ–Ω–∏—Ç—å OCR –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –º—É—Å–æ—Ä–∞
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ª–æ–≥–∏—Ä—É–µ—Ç –æ—à–∏–±–∫–∏ OCR

### ‚ùå –ß—Ç–æ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **OCR –∫–∞—á–µ—Å—Ç–≤–æ** - –¥–∞–∂–µ —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º poppler, OCR –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å —Ç–µ–∫—Å—Ç –∏–∑ AutoCAD —á–µ—Ä—Ç–µ–∂–µ–π
2. **Fallback –ª–æ–≥–∏–∫–∞** - –Ω–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É —Ç–µ–∫—Å—Ç—É, –µ—Å–ª–∏ OCR –Ω–µ –ø–æ–º–æ–≥

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –£–ª—É—á—à–∏—Ç—å OCR fallback

**–ü—Ä–æ–±–ª–µ–º–∞**: –ï—Å–ª–∏ OCR –Ω–µ —É–ª—É—á—à–∏–ª —Ç–µ–∫—Å—Ç, –º—ã –≤—Å–µ —Ä–∞–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º –º—É—Å–æ—Ä–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∫–∞—á–µ—Å—Ç–≤–∞ OCR —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:
```python
ocr_text = perform_ocr(page)
if _is_garbage(ocr_text):
    # OCR –Ω–µ –ø–æ–º–æ–≥, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç
    logger.warning(f"OCR –Ω–µ —É–ª—É—á—à–∏–ª –∫–∞—á–µ—Å—Ç–≤–æ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å—Ç—Ä. {page_num}")
    return ""  # –ò–ª–∏ –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç
else:
    return ocr_text
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å Gemini Vision API

**–ü—Ä–∏—á–∏–Ω–∞**: AutoCAD —á–µ—Ä—Ç–µ–∂–∏ - —ç—Ç–æ —Å–ª–æ–∂–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Å—Ö–µ–º—ã

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Gemini Vision**:
- –õ—É—á—à–µ –ø–æ–Ω–∏–º–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ú–æ–∂–µ—Ç –∏–∑–≤–ª–µ–∫–∞—Ç—å —Ç–µ–∫—Å—Ç –∏–∑ —Å—Ö–µ–º –∏ —á–µ—Ä—Ç–µ–∂–µ–π
- –ë—ã—Å—Ç—Ä–µ–µ Tesseract (~10-20 —Å–µ–∫ vs 5-6 –º–∏–Ω)

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- –°—Ç–æ–∏–º–æ—Å—Ç—å API –≤—ã–∑–æ–≤–æ–≤
- –¢—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ —Ç–∏–ø—É –¥–æ–∫—É–º–µ–Ω—Ç–∞

**–ò–¥–µ—è**: –û–ø—Ä–µ–¥–µ–ª—è—Ç—å —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ (—á–µ—Ä—Ç–µ–∂, —Ç–µ–∫—Å—Ç, —Å–º–µ—à–∞–Ω–Ω—ã–π) –∏ –ø—Ä–∏–º–µ–Ω—è—Ç—å —Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:
- **–¢–µ–∫—Å—Ç–æ–≤—ã–µ PDF**: –û–±—ã—á–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥
- **–ß–µ—Ä—Ç–µ–∂–∏/—Å—Ö–µ–º—ã**: Gemini Vision API
- **–°–º–µ—à–∞–Ω–Ω—ã–µ**: –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å poppler –ª–æ–∫–∞–ª—å–Ω–æ** (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è):
   ```bash
   sudo apt-get install poppler-utils
   ```

2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å OCR —Ä–µ–∑—É–ª—å—Ç–∞—Ç** –≤ Docker:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ OCR –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º—É—Å–æ—Ä
   - –°—Ä–∞–≤–Ω–∏—Ç—å —Å –∏—Å—Ö–æ–¥–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º

3. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å OCR fallback**:
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ OCR —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
   - –í–æ–∑–≤—Ä–∞—â–∞—Ç—å –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É, –µ—Å–ª–∏ OCR –Ω–µ –ø–æ–º–æ–≥

4. **–†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å Gemini Vision** –¥–ª—è —á–µ—Ä—Ç–µ–∂–µ–π:
   - –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ç–æ—Ç–∏–ø
   - –û—Ü–µ–Ω–∏—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏ –∫–∞—á–µ—Å—Ç–≤–æ

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π –≤–µ—Ä–¥–∏–∫—Ç

**Garbage detection —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!** ‚úÖ

–ü—Ä–æ–±–ª–µ–º–∞ –Ω–µ –≤ detection, –∞ –≤:
1. **–ö–∞—á–µ—Å—Ç–≤–µ OCR** –¥–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —á–µ—Ä—Ç–µ–∂–µ–π
2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ fallback** –º–µ—Ö–∞–Ω–∏–∑–º–∞
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ poppler** –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∫–∞—á–µ—Å—Ç–≤–∞ OCR —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏ fallback –ª–æ–≥–∏–∫—É.
